---
timeout: 60

init_tasks:
  - name: Add CF Busy URI for callee
    use: add_cf_uri

tasks:
  - name: Register Caller
    use: register_caller

  - name: Register call forward user
    use: register_cf_user
  
  - name: Register Callee
    use: register_callee

  - name: Caller UAC
    use: caller_uac
    require:
      after: Register Caller
      after: Register call forward user
      after: Register Callee
  
  - name: CF User UAS
    use: cf_user_uas
    require:
      after: Register Caller
      after: Register call forward user
      after: Register Callee

  - name: Callee UAS
    use: callee_uas
    require:
      after: Register Caller
      after: Register call forward user
      after: Register Callee

cleanup_tasks:
  - use: delete_caller_aor
  - use: delete_callee_aor
  - use: delete_cf_user_aor

  - name: Remove CF Busy URI for callee
    use: remove_cf_uri
